(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ff71ec7"],{"0448":function(t,e,i){t.exports=i.p+"media/tetris-burn.73862414.mp3"},"051ad":function(t,e,i){t.exports=i.p+"media/tetris-rotate.b19c7c35.mp3"},"0e90":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("window-static",{attrs:{id:t.id}},[i("title-bar",{attrs:{title:t.$t("reset")+" "+t.$t("statistics")}},[i("controls",{attrs:{hasMaxi:!1,hasMini:!1,close:t.handleClose}})],1),i("div",{staticClass:"container"},[i("div",{staticClass:"mb-5"},[t._v(t._s(t.$t("confirm-reset")))]),i("section",[i("button",{staticClass:"bt bt-primary",on:{click:t.reset}},[t._v(" "+t._s(t.$t("yes"))+" ")]),i("button",{staticClass:"bt bt-secondary",on:{click:t.handleClose}},[t._v(" "+t._s(t.$t("no"))+" ")])])])],1)},o=[],a=i("7e41"),n=i("3af2"),r=i("6210"),h={props:{id:String,close:Function},methods:{handleClose:function(){this.close&&this.close()},reset:function(){this.$emit("reset")}},components:{TitleBar:r["a"],Controls:n["a"],WindowStatic:a["a"]}},c=h,l=(i("d11b"),i("2877")),d=Object(l["a"])(c,s,o,!1,null,"d39e3370",null);e["a"]=d.exports},"170f":function(t,e,i){t.exports=i.p+"media/tetris-quad.7a619527.mp3"},2045:function(t,e,i){t.exports=i.p+"media/tetris-levelup.94899555.mp3"},2771:function(t,e,i){},"2fea":function(t,e,i){t.exports=i.p+"media/tetris-lock.d3a08852.mp3"},"6a1a":function(t,e,i){},"7adb":function(t,e,i){t.exports=i.p+"media/tetris-move.4ca1112f.mp3"},"7cdc":function(t,e,i){t.exports=i.p+"media/tetris-over.e473e7b4.mp3"},"7ded":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"root-container game-container"},[i("window",{staticClass:"maximized",attrs:{id:"window-tetris",resizable:!1,lock:t.showHelp||t.showStats}},[i("title-bar",{attrs:{title:t.$t("tetris"),icon:"tetris"}},[i("controls",{attrs:{hasMaxi:!1,close:t.exit}})],1),i("div",{staticClass:"toolbar"},[i("div",{staticClass:"toolbar-item"},[t._v(" "+t._s(t.$t("game"))+" "),i("ul",{staticClass:"toolbar-item-lv2"},[i("li",{on:{click:t.newGame}},[t._v(t._s(t.$t("new-game")))]),i("li",{staticClass:"separator"}),i("li",{on:{click:t.toggleStats}},[t._v(t._s(t.$t("statistics")))]),i("li",{on:{click:function(e){return e.stopPropagation(),t.exit(e)}}},[t._v(t._s(t.$t("exit")))])])]),i("div",{staticClass:"toolbar-item"},[t._v(" "+t._s(t.$t("help"))+" "),i("ul",{staticClass:"toolbar-item-lv2"},[i("li",{on:{click:t.toggleHelp}},[t._v(t._s(t.$t("view")+" "+t.$t("help")))])])])]),i("main",{staticClass:"container",style:{backgroundImage:"url("+t.background+")"}},[i("canvas",{ref:"gameCanvas"}),i("button",{ref:"btnPlay",attrs:{id:"play"},on:{click:t.togglePlay}},[t.isPlaying?i("i",{staticClass:"fa fa-pause"}):i("i",{staticClass:"fa fa-play"})]),i("button",{ref:"btnNew",attrs:{id:"new"},on:{click:t.newGame}},[i("i",{staticClass:"fa fa-rotate-left"})])])],1),t.showHelp?i("window-static",{staticClass:"help",attrs:{draggable:!1,resizable:!1}},[i("title-bar",{attrs:{title:t.$t("help")}},[i("controls",{attrs:{hasMaxi:!1,hasMini:!1,close:t.toggleHelp}})],1),i("div",{staticClass:"container"},[i("h3",[t._v("Controls")]),i("ul",[i("li",[t._v("Rotate piece: Tap the piece.")]),i("li",[t._v("Move piece: Drag the piece left/right.")]),i("li",[t._v("Drop piece: Drag the piece down.")])]),i("h3",[t._v("Credits")]),i("p",[t._v(" Classic Tetris is created by "),i("a",{attrs:{href:"https://github.com/llop",target:"_blank"}},[t._v("Albert Lobo")]),t._v(" and licensed MIT. ")]),i("p",[t._v(" Game icon is made available by "),i("a",{attrs:{href:"https://smashicons.com/",target:"_blank"}},[t._v("Smashicons")]),t._v(". ")])])],1):t._e(),t.showStats?i("window-static",{staticClass:"stats"},[i("title-bar",{attrs:{title:t.$t("statistics")}},[i("controls",{attrs:{hasMaxi:!1,hasMini:!1,close:t.toggleStats}})],1),i("div",{staticClass:"container"},[i("fieldset",{staticClass:"mb-5"},[i("legend",[t._v(t._s(t.$t("highscores")))]),t.statData&&t.statData.scores?i("table",[i("tr",[i("th",[t._v("Level")]),i("th",[t._v("Score")]),i("th",[t._v("Lines")])]),t._l(t.statData.scores,(function(e,s){return i("tr",{key:s},[i("td",[t._v(t._s(e.level))]),i("td",[t._v(t._s(e.score))]),i("td",[t._v(t._s(e.lines))])])}))],2):t._e()]),i("div",{staticClass:"mb-5"},[t.statData?[i("div",[t._v(t._s(t.$t("games-played"))+": "+t._s(t.statData.total))]),i("div",[t._v(t._s(t.$t("games-completed"))+": "+t._s(t.statData.completed))]),i("div",[t._v(" "+t._s(t.$t("completion-rate"))+": "+t._s((t.statData.completed/t.statData.total*100||0).toFixed())+"% ")])]:[i("div",[t._v(t._s(t.$t("games-played"))+": 0")]),i("div",[t._v(t._s(t.$t("games-completed"))+": 0%")]),i("div",[t._v(t._s(t.$t("completion-rate"))+": 0%")])]],2),i("div",{staticClass:"bts"},[i("button",{staticClass:"bt bt-primary",on:{click:t.toggleStats}},[t._v(" "+t._s(t.$t("close"))+" ")]),i("button",{staticClass:"bt bt-secondary",on:{click:t.toggleConfirm}},[t._v(" "+t._s(t.$t("reset"))+" ")])])])],1):t._e(),t.showConfirm?i("confirm-reset",{attrs:{close:t.toggleConfirm},on:{reset:t.resetStats}}):t._e()],1)},o=[],a=(i("caad"),i("2532"),i("159b"),i("07ac"),i("6792")),n=i("0f35"),r=i("e302"),h=i("e0b8"),c=i("3af2"),l=i("6210"),d=i("10dc"),u=i("7e41"),v=i("0e90"),_=(i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("06c5"));function p(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Object(_["a"])(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var s=0,o=function(){};return{s:o,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n=!0,r=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return n=t.done,t},e:function(t){r=!0,a=t},f:function(){try{n||null==i["return"]||i["return"]()}finally{if(r)throw a}}}}var E=i("1da1"),m=i("2909"),f=i("d4ec"),b=i("bee2"),g=i("ade3"),C=(i("96cf"),i("4ec9"),i("b0c0"),i("fb6a"),i("a434"),i("cb29"),i("c975"),function(){function t(e){var i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.boardWidth,a=void 0===o?t.BOARD_WIDTH:o,n=s.boardHeight,r=void 0===n?t.BOARD_HEIGHT:n,h=s.boardX,c=void 0===h?30:h,l=s.boardY,d=void 0===l?-35:l,u=s.squareSide,v=void 0===u?28:u,_=s.scoreX,p=void 0===_?330:_,E=s.scoreY,b=void 0===E?100:E,C=s.levelX,O=void 0===C?330:C,S=s.levelY,P=void 0===S?130:S,T=s.linesX,x=void 0===T?330:T,w=s.linesY,A=void 0===w?160:w,y=s.nextX,R=void 0===y?330:y,k=s.nextY,I=void 0===k?260:k,j=s.nextOffsetX,L=void 0===j?330:j,D=s.nextOffsetY,M=void 0===D?280:D,G=s.pauseX,N=void 0===G?145:G,H=s.pauseY,X=void 0===H?220:H,B=s.zColor,W=void 0===B?["#a52d19","#000"]:B,U=s.sColor,V=void 0===U?["#4835ee","#000"]:U,q=s.oColor,Y=void 0===q?["#126d12","#000"]:q,$=s.lColor,F=void 0===$?["#a52d19","#000"]:$,K=s.jColor,J=void 0===K?["#4835ee","#000"]:K,Z=s.tColor,z=void 0===Z?["#a52d19","#000"]:Z,Q=s.iColor,tt=void 0===Q?["#126d12","#000"]:Q,et=s.gameOverColor,it=void 0===et?["#fff","#000"]:et,st=s.ghostColor,ot=void 0===st?["#000","#aaa"]:st,at=s.canvasFont,nt=void 0===at?"17px verdana":at,rt=s.canvasFontColor,ht=void 0===rt?"#fff":rt,ct=s.backgroundColor,lt=void 0===ct?"#222":ct,dt=s.tetrisBackgroundColor,ut=void 0===dt?"#fff":dt,vt=s.borderColor,_t=void 0===vt?"#fff":vt,pt=s.gridColor,Et=void 0===pt?"#ddd":pt,mt=s.tapClickMaxDuration,ft=void 0===mt?500:mt,bt=s.tapClickMaxDistance,gt=void 0===bt?10:bt,Ct=s.rotateSound,Ot=void 0===Ct?void 0:Ct,St=s.moveSound,Pt=void 0===St?void 0:St,Tt=s.setSound,xt=void 0===Tt?void 0:Tt,wt=s.gameOverSound,At=void 0===wt?void 0:wt,yt=s.lineSound,Rt=void 0===yt?void 0:yt,kt=s.tetrisSound,It=void 0===kt?void 0:kt,jt=s.levelChangeSound,Lt=void 0===jt?void 0:jt,Dt=s.pauseSound,Mt=void 0===Dt?void 0:Dt,Gt=s.gameTheme,Nt=void 0===Gt?void 0:Gt;Object(f["a"])(this,t),Object(g["a"])(this,"_handleContextMenu",(function(t){t.preventDefault()})),Object(g["a"])(this,"_handleKeyDown",(function(e){switch(e.keyCode||e.which){case 37:case 65:e.preventDefault(),i.moveRight=!(i.moveLeft=!0);break;case 39:case 68:e.preventDefault(),i.moveLeft=!(i.moveRight=!0);break;case 38:case 75:case 87:case 88:e.preventDefault(),i.rotateAnticlockwise=!(i.rotateClockwise=!0);break;case 76:case 90:e.preventDefault(),i.rotateClockwise=!(i.rotateAnticlockwise=!0);break;case 40:case 83:e.preventDefault(),i.moveDown=!0;break;case 32:e.preventDefault(),i.hardDrop=!0;break;case 27:case 80:e.preventDefault(),i.gameState!=t.STATE_GAME_OVER&&(i.doUndoPause=!0);break}})),Object(g["a"])(this,"_handlePointerMove",(function(e){if(e.preventDefault(),i.gameState!==t.STATE_PAUSE){var s=i._getEventCoords(e),o=s.x,a=s.y,n=(a-i.boardY)/i.squareSide|0,r=(o-i.boardX)/i.squareSide|0,h=i._getPieceBounds(),c=h.top,l=h.bottom,d=h.left,u=h.right,v=(c+l)/2|0,_=(d+u)/2|0;n<=l&&(i.pointerMoveDownEnabled=!0),r<_&&(i.moveRight=!(i.moveLeft=!0)),r>_&&(i.moveLeft=!(i.moveRight=!0)),i.pointerMoveDownEnabled&&n>v&&(i.moveDown=!0)}})),Object(g["a"])(this,"_handlePointerDown",(function(e){if(i.gameState!==t.STATE_PAUSE){var s=i._getEventCoords(e),o=s.x,a=s.y;i.xIni=o,i.yIni=a,i.tIni=performance.now()}})),Object(g["a"])(this,"_handlePointerUp",(function(e){if(e.preventDefault(),i.gameState!==t.STATE_PAUSE){var s=i._getEventCoords(e),o=s.x,a=s.y,n=i.xIni-o,r=i.yIni-a,h=Math.sqrt(n*n+r*r);h<=i.tapClickMaxDistance&&performance.now()-i.tIni<=i.tapClickMaxDuration&&(0===e.button?i.rotateAnticlockwise=!(i.rotateClockwise=!0):i.rotateClockwise=!(i.rotateAnticlockwise=!0))}})),Object(g["a"])(this,"_handlePointerCancel",(function(t){t.preventDefault(),i.pointerMoveDownEnabled=!1})),Object(g["a"])(this,"_handleWheel",(function(e){e.preventDefault(),i.gameState!==t.STATE_PAUSE&&(e.deltaY>0?i.rotateAnticlockwise=!(i.rotateClockwise=!0):e.deltaY<0&&(i.rotateClockwise=!(i.rotateAnticlockwise=!0)))})),this.canvas=e,this.context=this.canvas.getContext("2d"),this.context.lineJoin="miter",this.boardWidth=a,this.boardHeight=r,this.board=[];for(var Ht=0;Ht<this.boardHeight;++Ht){for(var Xt=[],Bt=0;Bt<this.boardWidth;++Bt)Xt.push(7);this.board.push(Xt)}this.boardX=c,this.boardY=d,this.squareSide=v,this.boardBorder=[-.5+this.boardX,-.5+this.boardY+2*this.squareSide,.5+this.boardX+this.boardWidth*this.squareSide,.5+this.boardY+this.boardHeight*this.squareSide],this.scoreX=p,this.scoreY=b,this.levelX=O,this.levelY=P,this.linesX=x,this.linesY=A,this.nextX=R,this.nextY=I,this.nextOffsetX=L,this.nextOffsetY=M,this.pauseX=N,this.pauseY=X,this.canvasFont=nt,this.canvasFontColor=ht,this.zColor=Object(m["a"])(W),this.sColor=Object(m["a"])(V),this.oColor=Object(m["a"])(Y),this.lColor=Object(m["a"])(F),this.jColor=Object(m["a"])(J),this.tColor=Object(m["a"])(z),this.iColor=Object(m["a"])(tt),this.gameOverColor=Object(m["a"])(it),this.ghostColor=Object(m["a"])(ot),this.backgroundColor=lt,this.tetrisBackgroundColor=ut,this.borderColor=_t,this.gridColor=Et,this.tapClickMaxDuration=ft,this.tapClickMaxDistance=gt,this.rotateSound=Ot,this.moveSound=Pt,this.setSound=xt,this.gameOverSound=At,this.lineSound=Rt,this.tetrisSound=It,this.levelChangeSound=Lt,this.pauseSound=Mt,this.gameTheme=Nt,this.pieces=[{id:0,name:t.Z_PIECE,rot:t.Z_ROT,iniPos:t.Z_INI_POS,col:this.zColor,box:t.Z_BOX},{id:1,name:t.S_PIECE,rot:t.S_ROT,iniPos:t.S_INI_POS,col:this.sColor,box:t.S_BOX},{id:2,name:t.O_PIECE,rot:t.O_ROT,iniPos:t.O_INI_POS,col:this.oColor,box:t.O_BOX},{id:3,name:t.L_PIECE,rot:t.L_ROT,iniPos:t.L_INI_POS,col:this.lColor,box:t.L_BOX},{id:4,name:t.J_PIECE,rot:t.J_ROT,iniPos:t.J_INI_POS,col:this.jColor,box:t.J_BOX},{id:5,name:t.T_PIECE,rot:t.T_ROT,iniPos:t.T_INI_POS,col:this.tColor,box:t.T_BOX},{id:6,name:t.I_PIECE,rot:t.I_ROT,iniPos:t.I_INI_POS,col:this.iColor,box:t.I_BOX}],this.moveLeft=!1,this.moveRight=!1,this.moveDown=!1,this.rotateClockwise=!1,this.rotateAnticlockwise=!1,this.hardDrop=!0,this.doUndoPause=!1,this.xIni=void 0,this.yIni=void 0,this.tIni=void 0,this.pointerMoveDownEnabled=!1,this.playing=!1,this.gameLoop=!1,this.piece=this.pieces[0],this.piecePosition=[0,0],this.pieceRotation=0,this.next=this.pieces[0],this.startLevel=0,this.level=0,this.lines=0,this.score=0,this.pressDownScore=0,this.handlers=new Map,this.handlers.set(t.GAME_START,[]),this.handlers.set(t.GAME_OVER,[]),this.handlers.set(t.GAME_OVER_START,[]),this.handlers.set(t.GAME_OVER_END,[]),this.handlers.set(t.GAME_PAUSE,[]),this.handlers.set(t.GAME_RESUME,[]),this.handlers.set(t.PIECE_MOVE_LEFT,[]),this.handlers.set(t.PIECE_MOVE_RIGHT,[]),this.handlers.set(t.PIECE_MOVE_DOWN,[]),this.handlers.set(t.PIECE_HARD_DROP,[]),this.handlers.set(t.PIECE_ROTATE_CLOCKWISE,[]),this.handlers.set(t.PIECE_ROTATE_ANTICLOCKWISE,[]),this.handlers.set(t.PIECE_LOCK,[]),this.handlers.set(t.NEXT_PIECE,[]),this.handlers.set(t.LEVEL_CHANGE,[]),this.handlers.set(t.SCORE_CHANGE,[]),this.handlers.set(t.LINE_CLEAR_START,[]),this.handlers.set(t.LINE_CLEAR_END,[]),this.handlers.set(t.LINE_CLEAR,[]),this.frameCounter=0,this.areFrames=-1,this.framesTilDrop=-1,this.columnsCleared=-1,this.gameOverLine=-1,this.previousGameState=t.STATE_GAME_OVER,this.gameState=t.STATE_GAME_OVER,this.emptyRow=[];for(var Wt=0;Wt<this.boardWidth;++Wt)this.emptyRow.push(-1);this._render()}return Object(b["a"])(t,[{key:"setStartLevel",value:function(e){this.gameState===t.STATE_GAME_OVER&&(this.startLevel=Math.max(0,Math.min(19,e)))}},{key:"setGameOverColor",value:function(t){this.gameOverColor=Object(m["a"])(t)}},{key:"setGhostColor",value:function(t){this.ghostColor=Object(m["a"])(t)}},{key:"setPieceColor",value:function(e,i){switch(e){case t.Z_PIECE:this.zColor=Object(m["a"])(i);break;case t.S_PIECE:this.sColor=Object(m["a"])(i);break;case t.O_PIECE:this.oColor=Object(m["a"])(i);break;case t.L_PIECE:this.lColor=Object(m["a"])(i);break;case t.J_PIECE:this.jColor=Object(m["a"])(i);break;case t.T_PIECE:this.tColor=Object(m["a"])(i);break;case t.I_PIECE:this.iColor=Object(m["a"])(i);break}}},{key:"_getFramesPerGridcell",value:function(t){return 0===t?96:1===t?86:2===t?76:3===t?66:4===t?56:5===t?46:6===t?36:7===t?26:8===t?16:9===t?12:t<=12?10:t<=15?8:t<=18?6:t<=28?4:2}},{key:"togglePlayPause",value:function(){this.playing?this.doUndoPause=!0:this.play()}},{key:"quit",value:function(){this.playing&&this.gameState!=t.STATE_GAME_OVER&&this._triggerGameOver()}},{key:"play",value:function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.playing){e.next=2;break}return e.abrupt("return");case 2:this.playing=!0,this._disableUI(),this._addEventListeners(),this._resetParams(),this.gameTheme&&(this.gameTheme.currentTime=0,this.gameTheme.loop=!0,this.gameTheme.play()),this._dispatch(t.GAME_START,{type:t.GAME_START,level:this.level,score:this.score,lines:this.lines}),this._dispatch(t.NEXT_PIECE,{type:t.NEXT_PIECE,piece:this.piece.name,nextPiece:this.next.name}),this.gameLoop=!0;case 10:return this._process(),this._render(),e.next=14,this._sleep();case 14:if(this.gameLoop){e.next=10;break}case 15:this._removeEventListeners(),this._enableUI(),this.playing=!1,this._dispatch(t.GAME_OVER,{type:t.GAME_OVER,level:this.level,score:this.score,lines:this.lines});case 19:case"end":return e.stop()}}),e,this)})));function i(){return e.apply(this,arguments)}return i}()},{key:"_resetParams",value:function(){this.pointerMoveDownEnabled=!1,this.moveLeft=!1,this.moveRight=!1,this.moveDown=!1,this.rotateClockwise=!1,this.rotateAnticlockwise=!1,this.hardDrop=!1,this.doUndoPause=!1,this.xIni=void 0,this.yIni=void 0,this.tIni=void 0,this.piece=this.pieces[Math.random()*this.pieces.length|0],this.next=this.pieces[this._nextPieceId()],this.piecePosition=this.piece.iniPos.slice(0),this.pieceRotation=0,this.level=this.startLevel,this.lines=0,this.score=0,this.pressDownScore=0;for(var e=0;e<this.boardHeight;++e)for(var i=0;i<this.boardWidth;++i)this.board[e][i]=-1;this.frameCounter=0,this.areFrames=-1,this.framesTilDrop=-1,this.columnsCleared=-1,this.gameOverLine=-1,this.framesTilDrop=36+this._getFramesPerGridcell(this.level),this.previousGameState=t.STATE_DROP,this.gameState=t.STATE_DROP}},{key:"_addEventListeners",value:function(){this.canvas.addEventListener("contextmenu",this._handleContextMenu,{capture:!0,passive:!1}),document.addEventListener("pointerdown",this._handlePointerDown,{capture:!0,passive:!1}),document.addEventListener("pointermove",this._handlePointerMove,{capture:!0,passive:!1}),document.addEventListener("pointerup",this._handlePointerUp,{capture:!0,passive:!1}),document.addEventListener("pointercancel",this._handlePointerCancel,{capture:!0,passive:!1}),document.addEventListener("wheel",this._handleWheel,{capture:!0,passive:!1}),document.addEventListener("keydown",this._handleKeyDown,{capture:!0,passive:!1})}},{key:"_removeEventListeners",value:function(){this.canvas.removeEventListener("contextmenu",this._handleContextMenu,!0),document.removeEventListener("pointerdown",this._handlePointerDown,!0),document.removeEventListener("pointermove",this._handlePointerMove,!0),document.removeEventListener("pointerup",this._handlePointerUp,!0),document.removeEventListener("pointercancel",this._handlePointerCancel,!0),document.removeEventListener("wheel",this._handleWheel,!0),document.removeEventListener("keydown",this._handleKeyDown,!0)}},{key:"_disableUI",value:function(){this.canvas.style.touchAction="none"}},{key:"_enableUI",value:function(){this.canvas.style.touchAction="auto"}},{key:"_getEventCoords",value:function(t){var e=this.canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}},{key:"_getPieceBounds",value:function(){for(var t=this.piece.rot[this.pieceRotation],e=this.boardHeight,i=0,s=this.boardWidth,o=0,a=0;a<t.length;++a)for(var n=0;n<t[a].length;++n)if(0!=t[a][n]){var r=this.piecePosition[0]+n,h=this.piecePosition[1]+a;s=Math.min(s,r),o=Math.max(o,r),e=Math.min(e,h),i=Math.max(i,h)}return{top:e,bottom:i,left:s,right:o}}},{key:"_process",value:function(){switch(this._pauseCheck(),this.gameState){case t.STATE_DROP:this._processDrop();break;case t.STATE_BURN:this._processBurn();break;case t.STATE_ARE:this._processARE();break;case t.STATE_GAME_OVER:this._processGameOver();break;case t.STATE_PAUSE:break}this._resetInputs(),++this.frameCounter}},{key:"_processDrop",value:function(){if(--this.framesTilDrop,this.moveLeft&&this._canMovePiece(-1,0)){var e=Object(m["a"])(this.piecePosition);--this.piecePosition[0],this.moveSound&&(this.moveSound.currentTime=0,this.moveSound.play()),this._dispatch(t.PIECE_MOVE_LEFT,{type:t.PIECE_MOVE_LEFT,piece:this.piece.name,rotation:this.pieceRotation,oldPosition:e,newPosition:Object(m["a"])(this.piecePosition)})}if(this.moveRight&&this._canMovePiece(1,0)){var i=Object(m["a"])(this.piecePosition);++this.piecePosition[0],this.moveSound&&(this.moveSound.currentTime=0,this.moveSound.play()),this._dispatch(t.PIECE_MOVE_RIGHT,{type:t.PIECE_MOVE_RIGHT,piece:this.piece.name,rotation:this.pieceRotation,oldPosition:i,newPosition:Object(m["a"])(this.piecePosition)})}if(this.rotateClockwise&&this._canRot((this.pieceRotation+1)%this.piece.rot.length)){var s=this.pieceRotation;this.pieceRotation=(this.pieceRotation+1)%this.piece.rot.length,this.rotateSound&&(this.rotateSound.currentTime=0,this.rotateSound.play()),this._dispatch(t.PIECE_ROTATE_CLOCKWISE,{type:t.PIECE_ROTATE_CLOCKWISE,piece:this.piece.name,position:Object(m["a"])(this.piecePosition),oldRotation:s,newRotation:this.pieceRotation})}if(this.rotateAnticlockwise&&this._canRot((this.pieceRotation+this.piece.rot.length-1)%this.piece.rot.length)){var o=this.pieceRotation;this.pieceRotation=(this.pieceRotation+this.piece.rot.length-1)%this.piece.rot.length,this.rotateSound&&(this.rotateSound.currentTime=0,this.rotateSound.play()),this._dispatch(t.PIECE_ROTATE_ANTICLOCKWISE,{type:t.PIECE_ROTATE_ANTICLOCKWISE,piece:this.piece.name,position:Object(m["a"])(this.piecePosition),oldRotation:o,newRotation:this.pieceRotation})}if(this.hardDrop){var a=Object(m["a"])(this.piecePosition);while(this._canMovePiece(0,1))++this.piecePosition[1],this.pressDownScore+=2;this._dispatch(t.PIECE_HARD_DROP,{type:t.PIECE_HARD_DROP,piece:this.piece.name,rotation:this.pieceRotation,oldPosition:a,newPosition:Object(m["a"])(this.piecePosition)}),this._lockPiece()}else if(this.moveDown||0===this.framesTilDrop)if(this._canMovePiece(0,1)){this.moveDown&&++this.pressDownScore;var n=Object(m["a"])(this.piecePosition);++this.piecePosition[1],this.framesTilDrop=this._getFramesPerGridcell(this.level),this._dispatch(t.PIECE_MOVE_DOWN,{type:t.PIECE_MOVE_DOWN,piece:this.piece.name,rotation:this.pieceRotation,oldPosition:n,newPosition:Object(m["a"])(this.piecePosition),downPressed:this.moveDown})}else this._lockPiece()}},{key:"_lockPiece",value:function(){if(this.framesTilDrop=-1,this._setPiece(),this._dispatch(t.PIECE_LOCK,{type:t.PIECE_LOCK,piece:this.piece.name,rotation:this.pieceRotation,position:Object(m["a"])(this.piecePosition)}),this.linesCleared=this._getLinesCleared(),this.linesCleared.length>0){this.columnsCleared=0,this.gameState=t.STATE_BURN;for(var e=this.boardWidth/2,i=0;i<this.linesCleared.length;++i)this.board[this.linesCleared[i]][e+this.columnsCleared]=-1,this.board[this.linesCleared[i]][e-1-this.columnsCleared]=-1;var s=4===this.linesCleared.length?this.tetrisSound:this.lineSound;s&&(s.currentTime=0,s.play()),this._dispatch(t.LINE_CLEAR_START,{type:t.LINE_CLEAR_START,linesBurnt:Object(m["a"])(this.linesCleared)})}else{this.setSound&&(this.setSound.currentTime=0,this.setSound.play());var o=this.score;this.score+=this.pressDownScore,this._dispatch(t.SCORE_CHANGE,{type:t.SCORE_CHANGE,oldScore:o,newScore:this.score}),this.areFrames=this._getARE(),this.gameState=t.STATE_ARE}}},{key:"_processBurn",value:function(){if(this.frameCounter%8===0)if(++this.columnsCleared,this.columnsCleared<5)for(var e=this.boardWidth/2,i=0;i<this.linesCleared.length;++i)this.board[this.linesCleared[i]][e+this.columnsCleared]=-1,this.board[this.linesCleared[i]][e-1-this.columnsCleared]=-1;else{this.columnsCleared=-1;for(var s=this.linesCleared.length-1;s>=0;--s)this.board.splice(this.linesCleared[s],1);while(this.board.length<this.boardHeight)this.board.unshift(Object(m["a"])(this.emptyRow));var o=this.score,a=this.lines;this.score+=this.pressDownScore+this._getLinesScore(this.linesCleared.length,this.level),this.lines+=this.linesCleared.length,this._dispatch(t.LINE_CLEAR_END,{type:t.LINE_CLEAR_END,linesBurnt:Object(m["a"])(this.linesCleared)}),this._dispatch(t.LINE_CLEAR,{type:t.LINE_CLEAR,oldLines:a,newLines:this.lines}),this._dispatch(t.SCORE_CHANGE,{type:t.SCORE_CHANGE,oldScore:o,newScore:this.score});var n=this._getLevel();if(this.level!=n){var r=this.level;this.level=n,this.levelChangeSound&&(this.levelChangeSound.currentTime=0,this.levelChangeSound.play()),this._dispatch(t.LEVEL_CHANGE,{type:t.LEVEL_CHANGE,oldLevel:r,newLevel:this.level})}this.areFrames=this._getARE(),this.gameState=t.STATE_ARE}}},{key:"_processARE",value:function(){--this.areFrames,0===this.areFrames&&(this.areFrames=-1,this.pressDownScore=0,this.pointerMoveDownEnabled=!1,this.piece=this.next,this.piecePosition=this.piece.iniPos.slice(0),this.pieceRotation=0,this.next=this.pieces[this._nextPieceId()],this._canMovePiece(0,0)?(this.framesTilDrop=this._getFramesPerGridcell(this.level),this.gameState=t.STATE_DROP,this._dispatch(t.NEXT_PIECE,{type:t.NEXT_PIECE,piece:this.piece.name,nextPiece:this.next.name})):(this._setPiece(),this._triggerGameOver()))}},{key:"_triggerGameOver",value:function(){this.gameTheme&&this.gameTheme.pause(),this.gameOverSound&&(this.gameOverSound.currentTime=0,this.gameOverSound.play()),this.gameOverLine=1,this.gameState=t.STATE_GAME_OVER,this._dispatch(t.GAME_OVER_START,{type:t.GAME_OVER_START,level:this.level,score:this.score,lines:this.lines})}},{key:"_processGameOver",value:function(){if(this.frameCounter%8===0)if(++this.gameOverLine,this.gameOverLine<this.boardHeight)for(var e=0;e<this.boardWidth;++e)this.board[this.gameOverLine][e]=7;else this.gameLoop=!1,this._dispatch(t.GAME_OVER_END,{type:t.GAME_OVER_END,level:this.level,score:this.score,lines:this.lines})}},{key:"_pauseCheck",value:function(){this.doUndoPause&&(this.gameState===t.STATE_PAUSE?(this.gameState=this.previousGameState,this.pointerMoveDownEnabled=!1,this.gameTheme&&this.gameTheme.play(),this._dispatch(t.GAME_RESUME,{type:t.GAME_RESUME,level:this.level,score:this.score,lines:this.lines})):(this.previousGameState=this.gameState,this.gameState=t.STATE_PAUSE,this.gameTheme&&this.gameTheme.pause(),this.pauseSound&&(this.pauseSound.currentTime=0,this.pauseSound.play()),this._dispatch(t.GAME_PAUSE,{type:t.GAME_PAUSE,level:this.level,score:this.score,lines:this.lines})))}},{key:"_resetInputs",value:function(){this.moveLeft=!1,this.moveRight=!1,this.moveDown=!1,this.rotateClockwise=!1,this.rotateAnticlockwise=!1,this.hardDrop=!1,this.doUndoPause=!1}},{key:"_nextPieceId",value:function(){var t=8*Math.random()|0;return 7!==t&&t!==this.piece.id||(t=8*Math.random()|0,t=(t+this.piece.id)%7),t}},{key:"_getLinesScore",value:function(t,e){return 1===t?40*(e+1):2===t?100*(e+1):3===t?300*(e+1):1200*(e+1)}},{key:"_getARE",value:function(){var t=this._getLockHeight(),e=10+2*((t+2)/4|0);return 2*e}},{key:"_getLockHeight",value:function(){for(var t=0,e=this.piece.rot[this.pieceRotation],i=0;i<e.length;++i)for(var s=0;s<e[i].length;++s)0!=e[i][s]&&(t=Math.max(t,this.piecePosition[1]+i));return this.boardHeight-1-t}},{key:"_getLevel",value:function(){var t=this.lines-Math.min(10*this.startLevel+10,Math.max(100,10*this.startLevel-50));return this.startLevel+(t>=0?1+(t/10|0):0)}},{key:"_getLinesCleared",value:function(){for(var t=[],e=0;e<this.boardHeight;++e){for(var i=!0,s=0;i&&s<this.boardWidth;++s)-1===this.board[e][s]&&(i=!1);i&&t.push(e)}return t}},{key:"_setPiece",value:function(){for(var t=this.piece.rot[this.pieceRotation],e=0;e<t.length;++e)for(var i=0;i<t[e].length;++i)0!=t[e][i]&&(this.board[this.piecePosition[1]+e][this.piecePosition[0]+i]=this.piece.id)}},{key:"_canMovePiece",value:function(t,e){return this._canMove(this.piece,this.pieceRotation,this.piecePosition,t,e)}},{key:"_canMove",value:function(t,e,i,s,o){for(var a=t.rot[e],n=0;n<a.length;++n)for(var r=0;r<a[n].length;++r)if(0!=a[n][r]){var h=s+i[0]+r,c=o+i[1]+n;if(h<0||h>=this.boardWidth||c>=this.boardHeight||-1!=this.board[c][h])return!1}return!0}},{key:"_canRot",value:function(t){for(var e=this.piece.rot[t],i=0;i<e.length;++i)for(var s=0;s<e[i].length;++s)if(0!=e[i][s]){var o=this.piecePosition[0]+s,a=this.piecePosition[1]+i;if(o<0||o>=this.boardWidth||a>=this.boardHeight||-1!=this.board[a][o])return!1}return!0}},{key:"_render",value:function(){this._drawBackground(),this._drawBoard(),this._drawGhost(),this._drawPiece(),this._drawHUD(),this._drawNext()}},{key:"_drawBackground",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.lineWidth=1;var e=this.gameState===t.STATE_BURN&&4===this.linesCleared.length&&this.frameCounter%8?this.tetrisBackgroundColor:this.backgroundColor;if(this.context.beginPath(),this.context.moveTo(this.boardBorder[0],this.boardBorder[1]),this.context.lineTo(this.boardBorder[2],this.boardBorder[1]),this.context.lineTo(this.boardBorder[2],this.boardBorder[3]),this.context.lineTo(this.boardBorder[0],this.boardBorder[3]),this.context.closePath(),this.context.fillStyle=e,this.context.strokeStyle=this.borderColor,this.context.lineWidth=6,this.context.fill(),this.context.stroke(),this.gameState===t.STATE_PAUSE)this.context.font=this.canvasFont,this.context.fillStyle=this.canvasFontColor,this.context.fillText("PAUSE",this.pauseX,this.pauseY);else{this.context.lineWidth=.5,this.context.strokeStyle=this.gridColor;for(var i=this.boardX+this.squareSide*this.boardWidth,s=3;s<this.boardHeight;++s){var o=this.boardY+s*this.squareSide;this.context.beginPath(),this.context.moveTo(this.boardX,o),this.context.lineTo(i,o),this.context.closePath(),this.context.stroke()}for(var a=this.boardY+2*this.squareSide,n=this.boardY+this.boardHeight*this.squareSide,r=0;r<this.boardWidth;++r){var h=this.boardX+r*this.squareSide;this.context.beginPath(),this.context.moveTo(h,a),this.context.lineTo(h,n),this.context.closePath(),this.context.stroke()}this.context.lineWidth=1}}},{key:"_drawBoard",value:function(){if(this.gameState!==t.STATE_PAUSE)for(var e=2;e<this.boardHeight;++e)for(var i=0;i<this.boardWidth;++i)if(-1!=this.board[e][i]){var s=7==this.board[e][i]?this.gameOverColor:this.pieces[this.board[e][i]].col;this._drawSquare(this.boardX+i*this.squareSide,this.boardY+e*this.squareSide,s[0],s[1])}}},{key:"_drawPiece",value:function(){if(this.gameState===t.STATE_DROP)for(var e=this.piece.rot[this.pieceRotation],i=0;i<e.length;++i)for(var s=0;s<e[i].length;++s)0!=e[i][s]&&this.piecePosition[1]+i>1&&this._drawSquare(this.boardX+(this.piecePosition[0]+s)*this.squareSide,this.boardY+(this.piecePosition[1]+i)*this.squareSide,this.piece.col[0],this.piece.col[1],this.piece.name)}},{key:"_drawGhost",value:function(){if(this.gameState===t.STATE_DROP){var e=[this.piecePosition[0],this.piecePosition[1]];while(this._canMove(this.piece,this.pieceRotation,e,0,1))++e[1];for(var i=this.piece.rot[this.pieceRotation],s=0;s<i.length;++s)for(var o=0;o<i[s].length;++o)0!=i[s][o]&&e[1]+s>1&&this._drawSquare(this.boardX+(e[0]+o)*this.squareSide,this.boardY+(e[1]+s)*this.squareSide,this.ghostColor[0],this.ghostColor[1],t.GHOST_PIECE)}}},{key:"_drawHUD",value:function(){var e="SCORE:  ",i="LEVEL:  ",s="LINES:  ",o="NEXT",a=3,n=35,r=this.scoreX,h=this.scoreY,c=this.nextX,l=this.nextY;this.gameState!=t.STATE_PAUSE&&(e+=this.score,i+=this.level,s+=this.lines),this.context.fillStyle=this.borderColor,this.context.fillRect(r-a,h-a,250+2*a,120+2*a),this.context.fillStyle=this.backgroundColor,this.context.fillRect(r,h,250,120),this.context.fillStyle=this.borderColor,this.context.fillRect(c-a,l-a,150+2*a,120+2*a),this.context.fillStyle=this.backgroundColor,this.context.fillRect(c,l,150,120),this.context.font=this.canvasFont,this.context.fillStyle=this.canvasFontColor,this.context.fillText(e,r+n,h+n),this.context.fillText(i,r+n,h+30+n),this.context.fillText(s,r+n,h+60+n),this.context.fillText(o,c+n,l+n),this.nextOffsetX=c+n,this.nextOffsetY=l+n+20}},{key:"_drawNext",value:function(){if(this.gameState!==t.STATE_PAUSE&&this.gameState!==t.STATE_GAME_OVER)for(var e=this.next.rot[0],i=this.next.box,s=i[0];s<i[0]+i[2];++s)for(var o=i[1];o<i[1]+i[3];++o)0!=e[s][o]&&this._drawSquare(this.nextOffsetX+(o-i[1])*this.squareSide,this.nextOffsetY+(s-i[0])*this.squareSide,this.next.col[0],this.next.col[1],this.next.name)}},{key:"_drawSquare",value:function(e,i,s,o,a){var n=3,r=t.GHOST_PIECE;this.context.beginPath(),this.context.moveTo(e+1,i+1),this.context.lineTo(e+this.squareSide-1,i+1),this.context.lineTo(e+this.squareSide-1,i+this.squareSide-1),this.context.lineTo(e+1,i+this.squareSide-1),this.context.closePath(),this.context.fillStyle=s,this.context.strokeStyle=o,this.context.fill(),this.context.stroke(),a!==r&&(this.context.beginPath(),this.context.moveTo(e+1,i+1),this.context.lineTo(e+n,i+1),this.context.lineTo(e+n,i+n),this.context.lineTo(e+1,i+n),this.context.closePath(),this.context.fillStyle="#fff",this.context.fill(),this.context.beginPath(),this.context.moveTo(e+n,i+n),this.context.lineTo(e+3*n,i+n),this.context.lineTo(e+3*n,i+2*n),this.context.lineTo(e+2*n,i+2*n),this.context.lineTo(e+2*n,i+3*n),this.context.lineTo(e+n,i+3*n),this.context.closePath(),this.context.fill())}},{key:"_sleep",value:function(){return new Promise(requestAnimationFrame)}},{key:"on",value:function(t,e){var i=this.handlers.get(t);i&&i.push(e)}},{key:"off",value:function(t,e){var i=this.handlers.get(t);if(i){var s=i.indexOf(e);-1!=s&&i.splice(s,1)}}},{key:"_dispatch",value:function(t,e){var i=this.handlers.get(t);if(i){var s,o=p(i);try{for(o.s();!(s=o.n()).done;){var a=s.value;a(e)}}catch(n){o.e(n)}finally{o.f()}}}}]),t}());Object(g["a"])(C,"Z_ROT",[[[0,0,0],[1,1,0],[0,1,1]],[[0,0,1],[0,1,1],[0,1,0]]]),Object(g["a"])(C,"S_ROT",[[[0,0,0],[0,1,1],[1,1,0]],[[0,1,0],[0,1,1],[0,0,1]]]),Object(g["a"])(C,"O_ROT",[[[1,1],[1,1]]]),Object(g["a"])(C,"L_ROT",[[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]]]),Object(g["a"])(C,"J_ROT",[[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]],[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]]]),Object(g["a"])(C,"T_ROT",[[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]],[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]]]),Object(g["a"])(C,"I_ROT",[[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]]),Object(g["a"])(C,"Z_INI_POS",[4,1]),Object(g["a"])(C,"S_INI_POS",[4,1]),Object(g["a"])(C,"O_INI_POS",[4,2]),Object(g["a"])(C,"L_INI_POS",[4,1]),Object(g["a"])(C,"J_INI_POS",[4,1]),Object(g["a"])(C,"T_INI_POS",[4,1]),Object(g["a"])(C,"I_INI_POS",[3,0]),Object(g["a"])(C,"Z_BOX",[1,0,2,3]),Object(g["a"])(C,"S_BOX",[1,0,2,3]),Object(g["a"])(C,"O_BOX",[0,0,2,2]),Object(g["a"])(C,"L_BOX",[1,0,2,3]),Object(g["a"])(C,"J_BOX",[1,0,2,3]),Object(g["a"])(C,"T_BOX",[1,0,2,3]),Object(g["a"])(C,"I_BOX",[2,0,1,4]),Object(g["a"])(C,"Z_PIECE","z"),Object(g["a"])(C,"S_PIECE","s"),Object(g["a"])(C,"O_PIECE","o"),Object(g["a"])(C,"L_PIECE","l"),Object(g["a"])(C,"J_PIECE","j"),Object(g["a"])(C,"T_PIECE","t"),Object(g["a"])(C,"I_PIECE","i"),Object(g["a"])(C,"GHOST_PIECE","ghost"),Object(g["a"])(C,"STATE_DROP",0),Object(g["a"])(C,"STATE_BURN",1),Object(g["a"])(C,"STATE_ARE",2),Object(g["a"])(C,"STATE_GAME_OVER",3),Object(g["a"])(C,"STATE_PAUSE",4),Object(g["a"])(C,"GAME_START","game-start"),Object(g["a"])(C,"GAME_OVER","game-over"),Object(g["a"])(C,"GAME_OVER_START","game-over-start"),Object(g["a"])(C,"GAME_OVER_END","game-over-end"),Object(g["a"])(C,"GAME_PAUSE","game-pause"),Object(g["a"])(C,"GAME_RESUME","game-resume"),Object(g["a"])(C,"PIECE_MOVE_LEFT","piece-move-left"),Object(g["a"])(C,"PIECE_MOVE_RIGHT","piece-move-right"),Object(g["a"])(C,"PIECE_MOVE_DOWN","piece-move-down"),Object(g["a"])(C,"PIECE_HARD_DROP","piece-hard-drop"),Object(g["a"])(C,"PIECE_ROTATE_CLOCKWISE","piece-rotate-clockwise"),Object(g["a"])(C,"PIECE_ROTATE_ANTICLOCKWISE","piece-rotate-anticlockwise"),Object(g["a"])(C,"PIECE_LOCK","piece-lock"),Object(g["a"])(C,"NEXT_PIECE","next-piece"),Object(g["a"])(C,"LEVEL_CHANGE","level-change"),Object(g["a"])(C,"SCORE_CHANGE","score-change"),Object(g["a"])(C,"LINE_CLEAR_START","line-clear-start"),Object(g["a"])(C,"LINE_CLEAR_END","line-clear-end"),Object(g["a"])(C,"LINE_CLEAR","line-clear"),Object(g["a"])(C,"BOARD_WIDTH",10),Object(g["a"])(C,"BOARD_HEIGHT",22);var O=i("dd1a"),S=i.n(O),P=i("051ad"),T=i.n(P),x=i("2fea"),w=i.n(x),A=i("7adb"),y=i.n(A),R=i("0448"),k=i.n(R),I=i("170f"),j=i.n(I),L=i("2045"),D=i.n(L),M=i("7cdc"),G=i.n(M),N={data:function(){var t=this.$store.state,e=t.user,i=t.assets;return{background:Object(n["a"])(i.games,"tetris-bg"),showHelp:!1,showStats:!1,showConfirm:!1,isNew:!0,isPlaying:!1,statData:null,gameStats:new h["a"]("tetris",e),game:null,sound:{bgm:new Audio(S.a),rotate:new Audio(T.a),lock:new Audio(w.a),move:new Audio(y.a),burn:new Audio(k.a),quad:new Audio(j.a),levelup:new Audio(D.a),gameOver:new Audio(G.a)}}},mounted:function(){Object(r["q"])(),this.init(),document.addEventListener("click",this.pause)},methods:{init:function(){var t=this.$refs,e=t.gameCanvas,i=t.btnPlay,s=t.btnNew,o=e.parentElement,a=o.clientWidth,n=o.clientHeight,r=i.getBoundingClientRect(),h=s.getBoundingClientRect(),c=10,l=20,d=n/l,u=(a-d*c)/2;e.height=n+2*d,e.width=a,i.style.left=u-r.width-d+"px",i.style.bottom=2*d+h.height+"px",s.style.left=u-h.width-d+"px",s.style.bottom=d+"px",this.game=new C(e,{boardX:u,boardY:-d,boardWidth:c,boardHeight:l+2,squareSide:d,pauseX:(a-60)/2,nextX:u-153-d,nextY:d,scoreX:u+d*c+d,scoreY:d,borderColor:"#9edbf2",backgroundColor:"#000",tetrisBackgroundColor:"#000",gridColor:"#000",ghostColor:["#222","#000"],gameTheme:this.sound.bgm,rotateSound:this.sound.rotate,setSound:this.sound.lock,moveSound:this.sound.move,lineSound:this.sound.burn,tetrisSound:this.sound.quad,levelChangeSound:this.sound.levelup,gameOverSound:this.sound.gameOver}),this.game.on(C.GAME_OVER_END,this.handleGameOver)},newGame:function(){this.game.quit(),this.isNew=!0},handleGameOver:function(t){var e=t.level,i=t.score,s=t.lines;if(!this.isNew){var o=function(t,e){return e.score-t.score};this.gameStats.saveScore({level:e,score:i,lines:s},o),this.toggleStats(),this.isNew=!0}this.togglePlay()},pause:function(t){var e=t.target,i=this.$refs,s=i.gameCanvas,o=i.btnPlay,a=i.btnNew;![s,o,a].includes(e)&&this.isPlaying&&this.togglePlay()},togglePlay:function(){this.isNew&&(this.gameStats.init(0),this.isNew=!1),this.game.togglePlayPause(),this.isPlaying=!this.isPlaying},toggleHelp:function(){this.showHelp=!this.showHelp},toggleStats:function(){this.showStats=!this.showStats,this.statData=this.gameStats.getData()[0]},toggleConfirm:function(){this.showConfirm=!this.showConfirm},resetStats:function(){var t=this.gameStats;t.reset(),this.statData=t.getData()[0],this.toggleConfirm()},exit:function(){this.$root.$emit(a["f"].CloseWindow,"tetris"),this.game.gameLoop=!1,Object.values(this.sound).forEach((function(t){return t.src=""})),document.removeEventListener("click",this.pause)}},components:{Controls:c["a"],TitleBar:l["a"],Window:d["a"],WindowStatic:u["a"],ConfirmReset:v["a"]}},H=N,X=(i("f54a"),i("2877")),B=Object(X["a"])(H,s,o,!1,null,"3cf5db3e",null);e["default"]=B.exports},"7e41":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["window","active",{centered:t.centered}]},[t._t("default")],2)},o=[],a={props:{centered:{type:Boolean,default:!0}}},n=a,r=(i("d5c9"),i("2877")),h=Object(r["a"])(n,s,o,!1,null,"ce7844fc",null);e["a"]=h.exports},cb29:function(t,e,i){var s=i("23e7"),o=i("81d5"),a=i("44d2");s({target:"Array",proto:!0},{fill:o}),a("fill")},d11b:function(t,e,i){"use strict";i("2771")},d5c9:function(t,e,i){"use strict";i("ff46")},dd1a:function(t,e,i){t.exports=i.p+"media/tetris-bgm.10ad6034.mp3"},e0b8:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var s=i("5530"),o=i("d4ec"),a=i("bee2"),n=(i("4e82"),i("968c")),r={total:0,completed:0,won:0},h=function(){function t(e,i){var a=this;Object(o["a"])(this,t),this.user=i,this.key=e,n["a"].local.get("scores-"+e,this.user).then((function(t){a.data=t||{0:Object(s["a"])(Object(s["a"])({},r),{},{scores:[]}),1:Object(s["a"])(Object(s["a"])({},r),{},{scores:[]}),2:Object(s["a"])(Object(s["a"])({},r),{},{scores:[]})}}))}return Object(a["a"])(t,[{key:"getData",value:function(){return this.data}},{key:"saveData",value:function(){n["a"].local.update("scores-"+this.key,this.user,this.data)}},{key:"init",value:function(t){this.level=t,this.data[this.level].total++,this.saveData()}},{key:"saveScore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e){return t.time-e.time},i=this.data[this.level].scores;i.push(t),i.sort(e),i.length>5&&i.pop(),this.complete()}},{key:"win",value:function(){this.data[this.level].won++,this.saveData()}},{key:"complete",value:function(){this.data[this.level].completed++,this.saveData()}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.key;n["a"].local.remove("scores-"+t,this.user),this.data={0:Object(s["a"])(Object(s["a"])({},r),{},{scores:[]}),1:Object(s["a"])(Object(s["a"])({},r),{},{scores:[]}),2:Object(s["a"])(Object(s["a"])({},r),{},{scores:[]})}}}]),t}()},f54a:function(t,e,i){"use strict";i("6a1a")},ff46:function(t,e,i){}}]);
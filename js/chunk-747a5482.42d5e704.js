(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-747a5482"],{"39f2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root-container"},[n("window",{attrs:{id:"window-recorder",w:480,h:90,centered:!0,resizable:!1}},[n("title-bar",{attrs:{icon:"recorder",title:e.$t("recorder")}},[n("controls",{attrs:{"has-maxi":!1,"has-mini":!1,close:e.close}})],1),n("div",{staticClass:"container transparent"},[n("button",{class:{recording:e.isRecording},attrs:{disabled:e.isRecording&&!e.recorder},on:{click:e.toggleRecord}},[e._v(" "+e._s(e.isRecording?e.$t("stop"):e.$t("start"))+" ")]),n("span",[e._v(e._s(e.time))]),n("div",{attrs:{role:"progressbar"}},[n("div",{style:{width:e.frequency+"px"}})]),n("button",[n("i",{staticClass:"fa fa-question-circle"})])])],1),e.error?n("error",{on:{close:function(t){e.error=null}}},[e._v(e._s(e.error)+".")]):e._e(),e.canSave?n("dialog-file",{attrs:{dialogIcon:"recorder",dialogName:"save-as",fileName:Date.now().toString(),fileTypes:{wav:"Waveform Audio File (*.wav)"},content:e.content},on:{cancel:function(t){e.canSave=!1}}}):e._e()],1)},r=[],i=n("1da1"),o=n("3835"),c=(n("96cf"),n("ace4"),n("d3b7"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("13d5"),n("3af2")),s=n("6210"),u=n("10dc"),l=n("c02b"),d=n("9e54"),f=n("a146"),h=n("0e9a"),p=n("6792"),m=n("d0b6"),v=n("e302"),b={data:function(){return{isRecording:!1,canSave:!1,count:0,timer:null,framer:null,error:null,stream:null,recorder:null,analyzer:null,content:null,frequency:0,chunks:[]}},computed:{time:function(){return Object(f["d"])(this.count,!0)}},mounted:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?Object(m["a"])()&&!Object(v["h"])(p["g"].RECORD_AUDIO)?Object(v["n"])(p["g"].RECORD_AUDIO):void 0:this.showError({name:"NotSupportedError",message:"Device is not supported"})},methods:{toggleRecord:function(){this.isRecording=!this.isRecording,this.isRecording?this.start():this.stop()},toggleSave:function(){this.canSave=!this.canSave},start:function(){var e=this;this.canSave=!1,this.timer=setInterval((function(){return e.count++}),1e3),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(this.capture).catch(this.showError)},stop:function(){if(clearInterval(this.timer),cancelAnimationFrame(this.framer),this.count=0,this.frequency=0,this.recorder&&(this.recorder.stop(),this.recorder=null),this.stream){var e=this.stream.getAudioTracks(),t=Object(o["a"])(e,1),n=t[0];n.stop()}},capture:function(e){var t=this;this.stream=e,this.recorder=new MediaRecorder(e,{mimeType:"audio/webm"}),this.recorder.ondataavailable=function(e){return t.chunks.push(e.data)},this.recorder.onstop=this.save,this.recorder.start(),this.chunks=[],this.visualize(e)},visualize:function(e){var t=this,n=new(window.AudioContext||window.webkitAudioContext),a=n.createAnalyser();a.fftSize=32,n.createMediaStreamSource(e).connect(a);var r=new Uint8Array(a.frequencyBinCount),i=function e(){t.framer=requestAnimationFrame(e);var n=r.reduce((function(e,t){return e+t}),0);a.getByteFrequencyData(r),t.frequency=n/(2*r.length)};i()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["b"])(new Blob(e.chunks));case 2:e.content=t.sent,e.canSave=!0;case 4:case"end":return t.stop()}}),t)})))()},close:function(){this.stop(),this.$root.$emit(p["f"].CloseWindow,"recorder")},showError:function(e){this.error=e.message}},components:{Controls:c["a"],TitleBar:s["a"],Window:u["a"],Error:l["a"],DialogFile:d["a"]}},g=b,y=(n("99d1"),n("2877")),w=Object(y["a"])(g,a,r,!1,null,"601c1272",null);t["default"]=w.exports},"4ca0":function(e,t,n){},6594:function(e,t,n){"use strict";n("4ca0")},"99d1":function(e,t,n){"use strict";n("a341")},"9e54":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("computer",{attrs:{id:"window-dialog",dialogIcon:e.dialogIcon,dialogName:e.dialogName},on:{close:e.cancel,change:e.setPath},scopedSlots:e._u([{key:"footer",fn:function(){return[n("div",{staticClass:"form-control"},[n("label",[e._v(e._s(e.$t("file-name"))+":")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text"},domProps:{value:e.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveFile(t)},input:function(t){t.target.composing||(e.name=t.target.value)}}})]),n("div",{staticClass:"form-control"},[n("label",[e._v(e._s(e.$t("save-as"))+":")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.type=t.target.multiple?n:n[0]}}},e._l(e.fileTypes,(function(t,a){return n("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(e.fileTypes[a])+" ")])})),0)]),n("div",{staticClass:"buttons"},[e.isAndroid?e._e():n("button",{staticClass:"bt bt-secondary bt-download",attrs:{disabled:!e.name},on:{click:e.download}},[e._v(" "+e._s(e.$t("download"))+" ")]),n("button",{staticClass:"bt bt-primary",attrs:{disabled:!e.canSave},on:{click:e.saveFile}},[e._v(" "+e._s(e.$t("save"))+" ")]),n("button",{staticClass:"bt bt-secondary",on:{click:e.cancel}},[e._v(" "+e._s(e.$t("cancel"))+" ")])])]},proxy:!0}])})},r=[],i=n("1da1"),o=n("5530"),c=(n("96cf"),n("ac1f"),n("1276"),n("b64b"),n("a15b"),n("b0c0"),n("5319"),n("7db0"),n("d3b7"),n("2f62")),s=n("d0b6"),u=n("0e9a"),l=n("13a7"),d=n("f106"),f=n("01b4"),h=n("968c"),p={props:{dialogIcon:String,dialogName:String,fileName:String,fileTypes:Object,content:[String,Object,HTMLCanvasElement],parse:Function},data:function(){var e=this.fileName.split(".");return e.length>1&&e.pop(),{isAndroid:Object(s["a"])(),type:Object.keys(this.fileTypes)[0],name:e.join(""),path:null}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["user"])),{},{canSave:function(){return this.path&&this.name},fullName:function(){return this.name+"."+this.type},program:function(){return Object(u["h"])(this.fullName)?"player":Object(u["k"])(this.fullName)?"photo":"notepad"},icon:function(){return Object(u["h"])(this.fullName)?"media":Object(u["k"])(this.fullName)?"photo":Object(u["m"])(this.fullName)?"text":"file"},parsedContent:function(){var e=this.content,t=this.type;return this.parse?this.parse(t):("string"===typeof e||(e=e.toDataURL("image/".concat(t)),this.isAndroid&&(e=e.replace(/^data:image\/.*;base64,/,""))),e)}}),methods:{setPath:function(e){this.path=e},saveFile:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.canSave){t.next=2;break}return t.abrupt("return");case 2:if(n=e.path,a=e.fullName,r=e.parsedContent,i="c/User/Desktop",n!==i){t.next=13;break}return t.next=7,h["a"].local.get(f["a"].Shortcuts,e.user);case 7:if(o=t.sent,c=o.find((function(e){return e.lbl===a})),!c){t.next=12;break}return t.next=12,e.$store.dispatch(f["a"].ShortcutRemove,c.key);case 12:e.$store.dispatch(f["a"].ShortcutAdd,{lbl:a,key:e.program,icon:e.icon,path:i+"/"+a});case 13:d["a"].append(n,[d["a"].file(n,a,r)]).finally(e.cancel);case 14:case"end":return t.stop()}}),t)})))()},download:function(){var e=this.name,t=this.type,n=this.parsedContent;e&&Object(u["e"])(e+"."+t,t,n)},cancel:function(){this.$emit("cancel")}},components:{Computer:l["default"]}},m=p,v=(n("6594"),n("2877")),b=Object(v["a"])(m,a,r,!1,null,"15b8d010",null);t["a"]=b.exports},a146:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));n("99af"),n("b680");var a=n("0f35");function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=60;return e>=n?"".concat(Object(a["j"])((e/n).toFixed()),":").concat(Object(a["j"])(e%n)):t?"00:".concat(Object(a["j"])(e)):"".concat(e," seconds")}function i(e){return new Date(e).toLocaleDateString("en-US")}var o={PurblePlace:"purbleplace",PurblePair:"purblepair",PurbleShop:"purbleshop",ComfyCakes:"comfycakes"},c={Master:"Purble Master",Champ:"Champion of Logic",Detective:"Senior Detective"}},a341:function(e,t,n){}}]);